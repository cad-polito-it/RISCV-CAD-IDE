in generale lo strutturerei in maniera diversa

Overview generale
Flusso 1 (makefile + spike)
flusso 2 (makefile + verilator)
adding a new test program
Installing
vari software e cosa ci vuole da settare
Contributors
Licensing


# RISCV-CAD-IDE

A development environment for RISCV ISA. Made for running simulation using two key tools: spike and core-v-verify (with Verilator).
The main target are Software Test Libraries (STLs), and with this enviroment you can either emulates the execution of RISC-V programs in software, making it ideal for bare-metal software development, or simulate and validate RISC-V cores at the RTL (Register Transfer Level) with core-v-verify that include SystemVerilog testbenches made to simulate an actual RISC-V processor such as CV32E40P.

## Spike

### Run

The spike simulation can be launched from the makefile typing `$ make GOAL=spike`, with this the default test (swhw1) will be run. To run a specific test the sintax is `$ make GOAL=spike TEST=test_name` where test_name is the name of the directory where the .c and .S are stored.
After the execution all the generated file will be placed in a directory named spike_results:
i.e.
spike_results/
└── swhw1
    ├── objects
    │   └── swhw.o
    └── swhw1_spike
where swhw1_spike is the executable

### Clean

If you want to clean all the files and folders generated by a spike simulation (`$ make GOAL=spike ...`) you have to use `$ make clean-spike` and all the files in spike_results will be trashed. If you want to clean only the files (object and executable) of a specific test run: `$ make clean-spike-test TEST='test_name'`.

## Makefile instruction

Instruction to make it work properly

## Before

To use properly the makefile you must do this things before the first make

### yaml2make

In the yaml2make located in core-v-verif/bin you have to put your programs absolute path or relative path starting from the core-v-verif path, e.g. ../programs (relative) /home/usr/programs (absolute)

### Makefile variables

Either doing it by passing the variables in the command line or changing them in the Makefile, you must define the following variables:
<br>

* Test path, line 33/34, the default is path is set to be in the same dir of the Makefile;
* Core-v-verif, line 7, the default is path is set to be in the same dir of the Makefile;

### Setup variables

To make it work there are some variables that must be defined. To do that you have to, in the shell, run `$ source setup.sh`.
Make sure to change the variable if needed:
<br>

* riscv toolchain, this isn't defined in the Makefile and should be defined as **CV_SW_TOOLCHAIN** with an export, e.g /home/usr/opt/riscv;
* toolchain prefix, this isn't defined in the Makefile and should be defined as **CV_SW_PREFIX** with an export, e.g riscv64-unknown-elf-;
* compiler, this isn't defined in the Makefile and should be defined as **CV_SW_CC** with an export, e.g gcc;
* configuration, the default definition and export is rv32imc_zicsr, but it can be changed;

### Your own programs

to make your own program create a directory in the programs directory and put in there your .c and .S files followed by a test.yaml file

## After

all the things created after the simulation

### simulation_result

simulation_result is the directory where the results and the verilator executable of the verilator simulation go when it finishes all the process.

### cobj_dir

cobj_result is the directory where it's stored the core testbench generated by the first run of the Makefile.

### memory_dump.bin

non c'ho veramente idea di che straminchia sia

## Run

### How to run it (verilator)

To run everything, once followed the "before" instructions, you can  simply type `$ make` and the base test (swhw1) will be run on verilator, but to run your custom program you have to type `$ make TEST="test_name"`


## Clean

### How to clean it (verilator)

If you want to clean all the file generated for verilator by the `$ make ...`, including all the tb, you havo to type `$ make clean`, with this all the .hex .elf ..., all the tb contained in cobj_dir and the simulation_results folder will be cleared.

### How to clean it (spike)


